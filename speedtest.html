<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Speed Test • Fast.com</title>
  <meta name="description" content="Run an internet speed test powered by Fast.com inside your portal.">
  <link rel="stylesheet" href="styles.css">
</head>
<body class="speedtest-page">
  <header>
    <div class="brand">Speed Test</div>
    <button class="toggle" id="themeToggle">Toggle dark mode</button>
  </header>

  <main class="container">
    <div class="card">
      <h2 style="margin:0 0 8px">Fast.com (embedded)</h2>
      <p class="hint">Run the test below. If it doesn’t load or you want full‑screen, use “Open in new tab”.</p>

      <div class="actions">
        <a class="btn" href="https://fast.com" target="_blank" rel="noopener">Open in new tab</a>
        <button id="reload" class="btn" type="button">Reload</button>
      </div>

      <div class="iframe-wrap" id="frameWrap">
        <iframe id="fastFrame" src="https://fast.com" title="Fast.com speed test"></iframe>
      </div>
    </div>

    <p class="hint" style="margin-top:10px">
      Tip: For consistent results, close downloads/streams during the test. Mobile data may vary by signal and time of day.
    </p>
  </main>

  <script>
    // Dark mode preference
    const body = document.body;
    const saved = localStorage.getItem('theme');
    if (saved === 'dark') body.classList.add('dark');

    document.getElementById('themeToggle').addEventListener('click', () => {
      body.classList.toggle('dark');
      localStorage.setItem('theme', body.classList.contains('dark') ? 'dark' : 'light');
    });

    // Reload iframe (handy if it gets blocked or cached)
    document.getElementById('reload').addEventListener('click', () => {
      const frame = document.getElementById('fastFrame');
      // Some browsers block embedding; the reload will reattempt
      frame.src = frame.src;
    });
  </script>
</body>
</html>