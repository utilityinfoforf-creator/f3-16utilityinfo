<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Utility Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <!-- Login Page -->
    <div id="login" class="login-container">
      <div class="login-box">
        <h1>âš¡ Utility Portal</h1>
        <div class="form-group">
          <input id="customerId" placeholder="Enter your Customer ID" type="text">
        </div>
        <div class="form-group">
          <button onclick="login()">Login</button>
        </div>
        <div id="error" class="error" style="display:none;"></div>
      </div>
    </div>

    <!-- Dashboard Page -->
    <div id="dashboard" style="display:none;">
      <div class="language-toggle">
        <button class="lang-btn active" onclick="switchLanguage('en')">English</button>
        <button class="lang-btn" onclick="switchLanguage('bn')">à¦¬à¦¾à¦‚à¦²à¦¾</button>
        <!-- Logout moved here -->
        <button class="lang-btn" style="margin-left:8px; background:#dc3545; color:#fff; border-color:#dc3545;" onclick="logout()" id="btn-logout-top">ğŸšª Logout</button>
      </div>

      <div class="dashboard-header">
        <h1>Welcome, <span id="name">User</span>! ğŸ‘‹</h1>
        <p id="dashboardSubtitle">Your Utility Dashboard</p>
      </div>

      <div class="warning-box" id="warningBox">
        âš ï¸ If your electric meter balance goes below 200 tk, your line will be cut off.
      </div>

      <div class="dashboard-grid">
        <div class="info-card">
          <h3 id="label-electric">Electric Balance</h3>
          <div class="value" id="electricBalance">à§³0.00</div>
        </div>
        <div class="info-card">
          <h3 id="label-water">Water Bill Due</h3>
          <div class="value" id="waterBillDue">à§³0.00</div>
        </div>
        <div class="info-card">
          <h3 id="label-gas">Gas Bill Due</h3>
          <div class="value" id="gasBillDue">à§³0.00</div>
        </div>
        <div class="info-card">
          <h3 id="label-internet">Internet Connected</h3>
          <div class="value" id="internetConnected">N/A</div>
        </div>
        <div class="info-card">
          <h3 id="label-internet-bill">Internet Bill Due</h3>
          <div class="value" id="internetBillDue">à§³0.00</div>
        </div>
        <div class="info-card">
          <h3 id="label-flat">Flat Number</h3>
          <div class="value" id="flatNumber">N/A</div>
        </div>
        <div class="info-card">
          <h3 id="label-updated">Last Updated</h3>
          <div class="value" id="lastUpdated">N/A</div>
        </div>
      </div>

      <!-- Email Verification Section -->
      <div class="email-section">
        <h3 id="label-email">ğŸ“§ Email Notifications</h3>
        <div class="checkbox-group">
          <input type="checkbox" id="emailToggle" onchange="toggleEmail()">
          <label for="emailToggle" id="label-email-toggle">Receive balance updates by email</label>
        </div>
        <input id="emailAddress" type="email" placeholder="Enter your email address">
        
        <div id="toggleMsg"></div>
      </div>

      <!-- Notifications & Alerts Section -->
      <div class="notifications-section">
        <h3 id="label-notifications">ğŸ”” Notifications & Alerts</h3>
        <div class="alerts-container" id="alertsContainer">
          <div class="alert-item alert-info">
            <div class="alert-icon">âš¡</div>
            <div class="alert-content">
              <div class="alert-title" id="label-low-balance-alert">Low Balance Warning</div>
              <div class="alert-desc" id="label-low-balance-desc">Your balance is below 200 tk</div>
              <div class="alert-time">Last updated: <span id="low-balance-time">N/A</span></div>
            </div>
          </div>
          <div class="alert-item alert-warning">
            <div class="alert-icon">ğŸš¨</div>
            <div class="alert-content">
              <div class="alert-title" id="label-outage-alert">Service Status</div>
              <div class="alert-desc" id="label-outage-desc">All services running normally</div>
              <div class="alert-time">Status: <span id="service-status">Active</span></div>
            </div>
          </div>
          <div class="alert-item alert-success">
            <div class="alert-icon">âœ…</div>
            <div class="alert-content">
              <div class="alert-title" id="label-payment-confirm">Payment Confirmation</div>
              <div class="alert-desc" id="label-payment-confirm-desc">Last payment received successfully</div>
              <div class="alert-time">Received: <span id="last-payment-date">N/A</span></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Reporting Section -->
      <div class="reporting-section">
        <h3 id="label-reporting">ğŸ“Š Reporting & Analytics</h3>
        <div class="reporting-actions">
          <button class="btn btn-secondary" onclick="exportUsageReport()" id="btn-export-report">ğŸ“‘ Export Usage Report</button>
          <button class="btn btn-secondary" onclick="printBills()" id="btn-print-bills">ğŸ–¨ï¸ Print Bills</button>
          <button class="btn btn-secondary" onclick="viewComparativeAnalysis()" id="btn-comparative">ğŸ“Š Monthly Comparison</button>
        </div>
      </div>

      <!-- Data & Analytics Section -->
      <div class="analytics-section">
        <h3 id="label-analytics">ğŸ“ˆ Data & Analytics</h3>
        <div class="analytics-grid">
          <div class="analytics-card">
            <h4 id="label-billing-chart">ğŸ“Š Billing History</h4>
            <button class="btn btn-secondary" onclick="viewBillingHistory()" id="btn-billing-history">View Last 12 Months</button>
          </div>
          <div class="analytics-card">
            <h4 id="label-usage-trends">ğŸ“ˆ Usage Trends</h4>
            <button class="btn btn-secondary" onclick="viewUsageTrends()" id="btn-usage-trends">Consumption Patterns</button>
          </div>
          <div class="analytics-card">
            <h4 id="label-pdf-bills">ğŸ’¾ Download PDF</h4>
            <button class="btn btn-secondary" onclick="downloadBillsPDF()" id="btn-pdf-bills">Download as PDF</button>
          </div>
          <div class="analytics-card">
            <h4 id="label-payment-history">ğŸ“… Payment History</h4>
            <button class="btn btn-secondary" onclick="viewPaymentHistory()" id="btn-payment-history">View Receipts</button>
          </div>
        </div>
      </div>

      <!-- Security & Reminders Section -->
      <div class="security-section">
        <h3 id="label-security">ğŸ” Security & Reminders</h3>
        <div class="security-grid">
          <div class="security-card">
            <h4 id="label-2fa-title">ğŸ” Two-Factor Authentication</h4>
            <label for="2faToggle" id="label-2fa-toggle">Enable 2FA for added security</label>
            <input type="checkbox" id="2faToggle" onchange="toggle2FA()">
            <p class="security-info" id="2fa-info">Receive verification codes via email</p>
          </div>
          <div class="security-card">
            <h4 id="label-bill-reminders">ğŸ“ Auto Bill Reminders</h4>
            <label for="remindersToggle" id="label-reminders-toggle">Enable bill reminders</label>
            <input type="checkbox" id="remindersToggle" onchange="toggleBillReminders()">
            <p class="security-info" id="reminders-info">Get notified before bills are due</p>
          </div>
        </div>
      </div>

      <div class="action-buttons">
        <button class="btn btn-primary" onclick="goToPayment()" id="btn-payment">ğŸ’³ Make Payment</button>
        <button class="btn btn-secondary" onclick="goToTerms()" id="btn-terms">ğŸ“‹ Terms & Conditions</button>
        <button class="btn btn-secondary" onclick="window.location.href='connection.html'" id="btn-internet">ğŸŒ Request Internet Connection</button>
        <button class="btn btn-secondary" onclick="viewUpdateHistory()" id="btn-history">ğŸ“‹ Update History</button>
        <button class="btn btn-secondary" onclick="window.location.href='meter.html'">ğŸ“‹ Meter / Customer Numbers</button>
        <!-- Logout removed from here (moved to top) -->
      </div>

      <!-- Update History Modal -->
      <div id="historyModal" class="modal" style="display:none;">
        <div class="modal-content">
          <div class="modal-header">
            <h2 id="modal-history-title">ğŸ“‹ Update History</h2>
            <button class="close-btn" onclick="closeUpdateHistory()">&times;</button>
          </div>
          <div id="historyContainer" class="history-container">
            <!-- History items will be populated here -->
          </div>
        </div>
      </div>

      <!-- Comparative Analysis Modal -->
      <div id="comparativeModal" class="modal" style="display:none;">
        <div class="modal-content">
          <div class="modal-header">
            <h2 id="modal-comparative-title">ğŸ“Š Monthly Comparison Analysis</h2>
            <button class="close-btn" onclick="closeComparativeAnalysis()">&times;</button>
          </div>
          <div id="comparativeContainer" class="comparative-container">
            <!-- Comparison data will be populated here -->
          </div>
        </div>
      </div>

      <!-- Billing History Modal -->
      <div id="billingHistoryModal" class="modal" style="display:none;">
        <div class="modal-content">
          <div class="modal-header">
            <h2 id="modal-billing-title">ğŸ“Š Billing History - Last 12 Months</h2>
            <button class="close-btn" onclick="closeBillingHistory()">&times;</button>
          </div>
          <div id="billingHistoryContainer" class="billing-history-container">
            <!-- Billing chart and data will be populated here -->
          </div>
        </div>
      </div>

      <!-- Usage Trends Modal -->
      <div id="usageTrendsModal" class="modal" style="display:none;">
        <div class="modal-content">
          <div class="modal-header">
            <h2 id="modal-usage-title">ğŸ“ˆ Usage Trends & Consumption Patterns</h2>
            <button class="close-btn" onclick="closeUsageTrends()">&times;</button>
          </div>
          <div id="usageTrendsContainer" class="usage-trends-container">
            <!-- Usage trends data will be populated here -->
          </div>
        </div>
      </div>

      <!-- Payment History Modal -->
      <div id="paymentHistoryModal" class="modal" style="display:none;">
        <div class="modal-content">
          <div class="modal-header">
            <h2 id="modal-payment-title">ğŸ“… Payment History & Receipts</h2>
            <button class="close-btn" onclick="closePaymentHistory()">&times;</button>
          </div>
          <div id="paymentHistoryContainer" class="payment-history-container">
            <!-- Payment history will be populated here -->
          </div>
        </div>
      </div>
    </div>
  </div>

<script src="script.js"></script>
<script src="script-premium-features.js"></script>
</body>
</html>