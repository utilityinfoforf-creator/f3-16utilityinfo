<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Confirm Payment - Utility Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: Arial, sans-serif; background:#f4f6f9; margin:0; padding:0; }
    .container { max-width:500px; margin:50px auto; background:#fff; padding:20px; border-radius:8px; box-shadow:0 4px 10px rgba(0,0,0,.1); }
    h1 { text-align:center; }
    input, button { width:100%; padding:10px; margin-top:10px; border-radius:5px; border:1px solid #ccc; }
    button { background:#007bff; color:#fff; border:none; cursor:pointer; }
    button:hover { background:#0056b3; }
    .card { background:#f9fafc; padding:15px; margin-top:15px; border:1px solid #ddd; border-radius:5px; }
    .error { color:#b30000; margin-top:10px; }
    .success { color:#0a7c2f; margin-top:10px; }
    .back-btn { background:#6c757d; color:#fff; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Confirm Your Payment</h1>
    
    <!-- Transaction confirmation box -->
    <div class="card">
      <h3>Payment Confirmation</h3>
      <input id="customerId" placeholder="Enter Customer ID">
      <input id="transactionNumber" placeholder="Enter Transaction Number">
      <button onclick="submitTransaction()">Submit Payment Confirmation</button>
      <div id="transactionMsg"></div>
    </div>

    <button class="back-btn" onclick="goBack()">Back</button>
  </div>

  <script>
    const API_BASE = "https://script.google.com/macros/s/AKfycbxvBjqw2zs8n8xop1V1flLaJFGLK8MfuzSQTDXPdzuByT4v0gtm6yu8ToaYrnAe7qJ7cQ/exec";

    async function submitTransaction() {
      const id = document.getElementById("customerId").value.trim();
      const txn = document.getElementById("transactionNumber").value.trim();
      const msgEl = document.getElementById("transactionMsg");

      if (!id || !txn) {
        msgEl.innerText = "Please enter your Customer ID and Transaction Number.";
        msgEl.className = "error";
        return;
      }

      try {
        const res = await fetch(`${API_BASE}?id=${encodeURIComponent(id)}&transaction=${encodeURIComponent(txn)}`);
        const data = await res.json();
        if (data.status) {
          msgEl.innerText = data.status;
          msgEl.className = "success";
        } else {
          msgEl.innerText = "Could not submit transaction.";
          msgEl.className = "error";
        }
      } catch (err) {
        msgEl.innerText = "Network error while submitting transaction.";
        msgEl.className = "error";
      }
    }

    function goBack() {
      window.history.back();
    }
  </script>
</body>
</html>
